<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Licencias · Portal del Empleado · Tecnomedica</title>
  <meta name="theme-color" content="#1e88e5" />
  <link rel="icon" href="Logo.png" type="image/png" />
  <!-- Reutilizamos los estilos generales del portal -->
  <link rel="stylesheet" href="./activos/app.css?v=26" />

  <!-- Estilos pequeños específicos de Licencias -->
  <style>
    .lic-page {
      max-width: 960px;
      margin: 0 auto;
    }
    .lic-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 16px;
    }
    .lic-header .brand-row {
      margin: 0;
    }
    .lic-emp {
      font-size: 14px;
      color: #6b7280;
    }
    .leaveItem {
      padding: 10px 0;
      border-top: 1px solid #e5e7eb;
    }
    .leaveItem:first-child {
      border-top: none;
    }
    .leaveMain {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: baseline;
      font-size: 14px;
      color: #111827;
    }
    .leaveMain strong {
      font-weight: 700;
    }
    .leaveRange {
      font-size: 13px;
      color: #4b5563;
    }
    .leaveMeta {
      font-size: 12px;
      color: #6b7280;
      margin-top: 2px;
    }
    .leaveNotes {
      font-size: 12px;
      color: #374151;
      margin-top: 4px;
    }
    .small {
      font-size: 13px;
    }
    .m-b-xs {
      margin-bottom: 4px;
    }
  </style>

  <!-- Supabase JS -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="app lic-page">
    <div class="card">
      <!-- Topbar -->
      <div class="lic-header">
        <div class="brand-row no-gap">
          <img src="Logo.png" alt="Tecnomedica Montajes Industriales S.A.">
          <div class="title">Licencias · Tecnomedica</div>
        </div>
        <div class="row" style="gap:8px;">
          <button class="btn light" id="btnBack">← Menú</button>
          <button class="btn light" id="btnLogout">Salir</button>
        </div>
      </div>

      <!-- Info empleado -->
      <div class="lic-emp m-b">
        Iniciaste sesión como<br>
        <strong id="empNameLic">—</strong>
      </div>

      <!-- Nueva licencia -->
      <div class="card inner m-b">
        <div class="listTitle m-b-sm">Nueva licencia</div>

        <label class="muted" for="leaveType">Tipo</label>
        <select id="leaveType">
          <option value="">— Selecciona tipo —</option>
          <option value="VACACIONES">Vacaciones</option>
          <option value="INCAPACIDAD">Incapacidad</option>
          <option value="MATERNIDAD">Maternidad</option>
          <option value="OTRO">Otro</option>
        </select>

        <div class="row m-t-sm" style="gap:8px;">
          <div style="flex:1;">
            <label class="muted" for="leaveStart">Desde</label>
            <input id="leaveStart" type="date">
          </div>
          <div style="flex:1;">
            <label class="muted" for="leaveEnd">Hasta</label>
            <input id="leaveEnd" type="date">
          </div>
        </div>

        <label class="muted m-t-sm" for="leaveIssuer">Emisor (opcional)</label>
        <input id="leaveIssuer" type="text" placeholder="CCSS, INS, Empresa…">

        <label class="muted m-t-sm" for="leaveCert">N.º boleta / certificado (opcional)</label>
        <input id="leaveCert" type="text" placeholder="Ej. INC-001">

        <label class="muted m-t-sm" for="leaveNotes">Notas</label>
        <textarea id="leaveNotes" rows="3" placeholder="Motivo o detalle de la licencia…"></textarea>

        <button class="btn btnPrimary block m-t" id="btnLeaveSave">
          Enviar solicitud
        </button>

        <div id="leaveMsg" class="muted small m-t-xs"></div>
      </div>

      <!-- Historial -->
      <div class="card inner">
        <div class="listTitle m-b-sm">Historial</div>
        <div id="leaveList" class="muted small">Cargando licencias…</div>
      </div>
    </div>
  </div>

  <!-- Lógica de licencias -->
  <script type="module" src="./activos/licencias.js?v=1"></script>
</body>
</html>
